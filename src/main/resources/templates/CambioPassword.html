<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>CambioPassword</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
    <script type="text/javascript" src='/script.js'></script>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
<div th:replace="~{NavBarUser.html}"></div>

<h2>Cambia la password</h2>
<form action="/cambioPassword" method="post">
    <div class="mb-3">
        <label for="passwordV" class="form-label">Vecchia Password</label>
        <input type="password" class="form-control" id="passwordV" name="passwordV" required>
        <button type="button" onclick="mostraPassword('passwordV')" >cliccami ;P</button>
    </div>
    <div class="mb-3">
        <label for="password" class="form-label">Nuova Password</label>
        <input type="password" class="form-control" id="password" name="passwordN"
               pattern="^(?=(.*\d){2,})(?=.*[!@#$%^&*(),.?\:{}|<>]).{9,}$"
               title="deve contenere almeno un carattere speciale, due numeri e deve essere di una lunghezza minima di 9 caratteri" required
               onkeyup="checkPassword()" onfocus="mostraMessaggio('messaggio')" onblur="nascondiMessaggio('messaggio')">
        <button type="button" onclick="mostraPassword('password')" >cliccami ;P</button>
    </div>
    <div id="messaggio" style="display: none">
        <h3>La password deve contenere:</h3>
        <p id="speciali" class="invalid">1 carattere <b>speciale</b> </p>
        <p id="numeri" class="invalid">2 <b>numeri</b></p>
        <p id="lunghezza" class="invalid"> <b>8 lettere</b></p>
    </div><br><br>
    <div class="mb-3">
        <label for="passwordC" class="form-label">Conferma Nuova Password</label>
        <input type="password" class="form-control" id="passwordC"
               onblur="nascondiMessaggio('testoVerifica')" onclick="mostraMessaggio('testoVerifica')"
               onkeyup="matchpassword('passwordN','PasswordC')" required>
        <button type="button" onclick="mostraPassword('passwordC')" >cliccami ;P</button>
    </div>
    <div id="testoVerifica" style="display: none" >
        <p id="uguale" class="invalid">le password non sono uguali/</p>
    </div><br><br>

    <button type="submit" class="btn btn-primary">Cambia Password</button>
</form>

</body>
</html>